{% extends "layout.html.twig" %}
{% block title %}
Modifier un trick
{% endblock %}
{% block content %}
    <div class="container-fluid col-5 mt-5">
    {{ form_start(form) }}
        {{ form_row(form.name) }}
        {{ form_row(form.description) }}
        {{ form_row(form.trickGroup) }}
        {% if trick.trickImages %}
            <div class="container col-12 row justify-content-around flex-wrap mt-3">
                <p>Les images :</p>
                {% for trickImage in trick.trickImages %}
                    <div class="col-12 col-sm-5 col-lg-5 col-xl-5 text-center m-1">
                        <img class="card-img-top trick-card-img" src="{{asset('upload/'~ trickImage.name)}}" alt="Card image cap">
                        <button type="button" class="btn btn-danger remove-image mt-1" data-image-id="{{trickImage.id}}" data-token="{{ csrf_token(trickImage.id)}}">Supprimer</button>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
        {{ form_row(form.image) }}
        {% if trick.trickVideos %}
            <div class="container col-12 row justify-content-around flex-wrap mt-3">
                <p>Les videos :</p>
                {% for trickVideo in trick.trickVideos %}
                    <div class="col-12 col-sm-5 col-lg-5 col-xl-5 m-1">
                        <embed class="card-img-top w-100" type="video/webm" src="{{trickVideo.link}}"/>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
        {% for videoField in form.trickVideos %}
        <div class="container-fluid col-12 row align-items-center m-0 p-0">
            <div class="container-fluid col-10 m-0 p-0">
                {{ form_errors(videoField) }}
                {{ form_widget(videoField) }}
            </div>
            <div class="container-fluid delete-button-container col-2 m-0 p-0">
                <button type="button" class="btn btn-danger remove-video"><i class="bi bi-x-square"></i></button>
            </div>
        </div>
        {% endfor %}
        <div class="trick-video"
                data-index="{{ form.trickVideos|length > 0 ? form.trickVideos|last.vars.name + 1 : 0 }}"
                data-prototype="{{ form_widget(form.trickVideos.vars.prototype)|e('html_attr') }}"
        >
        </div>
        <button type="button" class="btn btn-primary add-video mt-3 mb-5" data-collection-holder-class="trick-video">Ajouter une vid√©o</button>
    {{ form_end(form) }}
    </div>
{% endblock %}
{% block script %}
    <script type="text/javascript" src="{{ asset('assets/js/createTrick.js') }}"></script>
    <script type="text/javascript" src="{{ asset('assets/js/updateTrick.js') }}"></script>
{% endblock %}
